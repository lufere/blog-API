{"version":3,"sources":["BlogDetail.js","LogIn.js","BlogPreview.js","Homepage.js","Header.js","Signup.js","App.js","index.js"],"names":["BlogDetail","props","id","useParams","useEffect","checkExpiration","Promise","all","fetch","process","then","values","test","map","x","json","data","setTimeout","setPostDetail","post","setPostComments","comments","console","log","commentList","comment","className","author","username","content","timestamp_formatted","_id","title","localStorage","getItem","name","value","onChange","onClick","event","preventDefault","method","headers","body","JSON","stringify","response","setComment","catch","err","error","type","to","LogIn","history","useHistory","setUsername","setPassword","parse","password","status","info","message","alert","token","user","setItem","push","BlogPreview","postId","timestamp","Homepage","posts","setPosts","post_list","postList","length","Header","clear","window","location","reload","href","Signup","e","errors","forEach","msg","App","useState","postDetail","postComments","handleChange","target","isExpired","decodedToken","jwt","decode","complete","dateNow","Date","payload","exp","getTime","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f3a591db.chunk.js","sourcesContent":["import React, { useEffect } from 'react';\nimport { useParams, Link } from \"react-router-dom\"\nimport './spinner.css'\n\nconst BlogDetail = props => {\n    const {id} = useParams();\n\n    useEffect(()=>{\n        props.checkExpiration();\n        Promise.all([fetch(`${process.env.REACT_APP_API}/posts/` + id),fetch(`${process.env.REACT_APP_API}/posts/${id}/comments`)])\n            .then(values=>{\n                let test = values.map(x=>x.json())\n                Promise.all(test)\n                    .then(data=>{\n                        setTimeout(() => {\n                            props.setPostDetail(data[0].post);\n                            props.setPostComments(data[1].comments);\n                        }, 1100);\n\n                    })\n            })\n            return () =>{\n                // console.log('unmounted');\n                props.setPostDetail('');\n                props.setPostComments(null);\n            }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n\n    if(props.comments!=null){\n        console.log('this',props.comments[0])\n        var commentList = props.comments.map(comment=><div key={comment._id} className='comment'>\n            <p>{comment.author?comment.author.username:'Anonymous'} said: </p>\n            <p>{comment.content}</p>\n            <p>On {comment.timestamp_formatted}</p>\n        </div>\n        )\n    }\n\n    function onSubmit(event){\n        event.preventDefault();\n        fetch(`${process.env.REACT_APP_API}/posts/${id}/comments/`,{\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': \"Bearer \" + localStorage.getItem('authToken')\n            },\n            body: JSON.stringify({\n                \"content\":props.comment\n            })\n        })\n            .then(response=>response.json())\n            .then(data=>{\n                fetch(`${process.env.REACT_APP_API}/posts/${id}/comments`)\n                    .then(response=>response.json())\n                    .then(data=>{\n                        props.setPostComments(data.comments);\n                        props.setComment('');\n                    })\n                    .catch(err=>console.error(err));\n            })\n            .catch(err=>console.error(err));\n    }\n    if(!props.data){\n        return(\n            <div className=\"spinnerContainer\">\n                <div className=\"spinner\">\n                    <div className=\"rect1\"></div>\n                    <div className=\"rect2\"></div>\n                    <div className=\"rect3\"></div>\n                    <div className=\"rect4\"></div>\n                    <div className=\"rect5\"></div>\n                </div>\n            </div>\n        )\n    }else{\n        return(\n            <div className='blogDetailContainer'>\n                <div className='blogDetail'>\n                    <h1>{props.data.title}</h1>\n                    <p className='detailAuthor'>By {props.data.author?props.data.author.username:null}</p>\n                    <p>{props.data.content}</p>\n                    <p className='detailPublished'>Published on: {props.data.timestamp_formatted}</p>\n                    <h2>Comments</h2>\n                    {/* <div className='spinner'></div> */}\n                    <div className='commentContainer'>\n                        {commentList}\n                    </div>\n                    {localStorage.getItem('currentUser')?\n                        <form>\n                            <label> Make a comment:\n                                <textarea\n                                    name='comment'\n                                    value={props.comment}\n                                    onChange={props.onChange}\n                                />\n                                <button onClick={onSubmit} type='submit'>Submit</button>\n                            </label>\n                        </form>\n                        :<p className='userRequired'>\n                            You need to be a user to leave comments. \n                            <Link to='/login'> Log in </Link>\n                            or \n                            <Link to='/signup'> Sign up </Link>\n                        </p>\n                    }\n\n                </div>\n            </div>\n        )\n    }\n\n}\n\nexport default BlogDetail","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nconst LogIn = props => {\n    const history = useHistory();\n\n    useEffect(()=>{\n        props.setUsername('');\n        props.setPassword('');\n    },[])\n\n    function onSubmit(event){\n        event.preventDefault();\n        fetch(`${process.env.REACT_APP_API}/login`,{\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                \"username\": props.username,\n                \"password\": props.password\n            })\n        })\n            .then(response=>response.json())\n            .then(data=>{\n                console.log(data.status);\n                if(data.status===400){\n                    console.log('info', data.info)\n                    if(data.info && data.info.message) alert(data.info.message);\n                    props.setPassword('');\n                }\n                if(data.status===200){\n                    let token = data.token;\n                    let user = data.user;\n                    console.log('user', data.user)\n                    localStorage.setItem('currentUser', JSON.stringify(user));\n                    localStorage.setItem('authToken', token);\n                    props.setUsername('');\n                    props.setPassword('');\n                    history.push('/');\n                }\n            })\n            .catch(err=>console.error(err));\n    }\n\n    if(JSON.parse(localStorage.getItem('currentUser'))){\n        return(\n            <div>\n                <Link to='/'>Back</Link>\n                <p>You're already logged in {JSON.parse(localStorage.getItem('currentUser')).username}</p>\n            </div>\n        )\n    }else{\n        return(\n            <div className='userFormContainer'>\n                <div className='userForm'>\n                    <h3>Log in</h3>\n                    <form>\n                        <label>Username\n                            <input\n                                name='username' \n                                id='username' \n                                type='text' \n                                value={props.username} \n                                onChange={props.onChange}\n                            />\n                        </label>\n                        <label >Password\n                            <input\n                                name='password' \n                                id='password' \n                                type='password' \n                                value={props.password} \n                                onChange={props.onChange}\n                            />\n                        </label>\n                        <p>Don't have an account? <Link to='/signup'>Sign Up</Link></p>\n                        <button onClick={onSubmit} type='submit'>Log In</button>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default LogIn","import React from 'react';\nimport { Link } from 'react-router-dom';\n// import './BlogPreview.css';\n\nconst BlogPreview = props => {\n    // console.log('preview: ',props.posts[0])\n    return(\n        <Link to={'/posts/' + props.postId}>\n            <div className='blogPreview'>\n                <div className='content'>\n                    <h1>{props.title}</h1>\n                    <p className='authorPreview'>Authored by <span>{props.author?props.author:'Anonymous'}</span> on <span>{props.timestamp}</span></p>\n                    <p className='contentPreview'>{props.content}</p>\n                </div>\n            </div>\n        </Link>\n    )\n}\n\nexport default BlogPreview","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect } from \"react\";\nimport BlogPreview from \"./BlogPreview\"\n\nconst Homepage = props =>{\n\n    useEffect(()=>{\n      console.log('API',process.env.REACT_APP_API)\n      props.checkExpiration();\n        fetch(`${process.env.REACT_APP_API}/posts`)\n          .then(posts =>posts.json())\n          .then(posts =>{\n            // console.log(posts)\n              setTimeout(() => {\n                props.setPosts(posts.post_list);\n              }, 1100);\n          })\n          .catch(err=>console.error(`Error: ${err}`));\n          // console.log(localStorage.getItem('authToken'));\n        //   console.log(localStorage.getItem('currentUser'));\n          // localStorage.clear();\n          // console.log('Check expiration');\n    },[])\n\n        var postList = props.posts.map(post=>{\n          return <BlogPreview\n            key = {post.title+' - '+post.author}\n            title = {post.title}\n            author = {post.author?post.author.username:null}\n            content = {post.content}\n            postId = {post._id}\n            timestamp = {post.timestamp_formatted}\n          />\n        })\n    if(props.posts.length===0){\n      return(\n        <div className='spinnerContainer'>  \n          <div className=\"spinner\">\n            <div className=\"rect1\"></div>\n            <div className=\"rect2\"></div>\n            <div className=\"rect3\"></div>\n            <div className=\"rect4\"></div>\n            <div className=\"rect5\"></div>\n          </div>\n        </div>\n      )\n    }else{\n      return(\n        <div className=\"homepage\">\n          {/* <h3>Welcome {localStorage.getItem('currentUser')?JSON.parse(localStorage.getItem('currentUser')).username:null}</h3> */}\n            {postList}\n        </div>\n      )\n    }\n}\n\nexport default Homepage","import { useEffect } from \"react\"\nimport { Link } from \"react-router-dom\"\n\nconst Header = props =>{\n\n    useEffect(()=>{\n        // console.log('updated');\n        // props.checkExpiration();\n    })\n\n    if(localStorage.getItem('currentUser')){\n        return(\n        <header>\n            <Link className='logo' to='/'>Blog API</Link>\n            <nav>\n                <p onClick={()=>localStorage.clear()}>Welcome {JSON.parse(localStorage.getItem('currentUser')).username}</p>\n                <p \n                    onClick={()=>{\n                        localStorage.clear();\n                        window.location.reload();\n                        }} \n                    className='logout'\n                >Logout</p>\n            </nav>\n        </header>\n        )\n    }else{\n        return(\n            <header>\n                <Link to='/'>Blog API</Link>\n                <nav>\n                    <a href='https://lufere.dev/blog-manager'>Blog Manager</a>\n                    <Link to='/login'>Login</Link>\n                    <Link to='/signup'>Sign up</Link>\n                </nav>\n            </header>\n        )\n    }\n}\n\nexport default Header","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect } from \"react\"\nimport { Link, useHistory } from \"react-router-dom\";\n\nconst Signup = props =>{\n    const history = useHistory();\n\n    useEffect(()=>{\n        props.setUsername('');\n        props.setPassword('');\n    },[])\n\n    function onSubmit(e){\n        e.preventDefault();\n        fetch(`${process.env.REACT_APP_API}/sign-up`,{\n            method:'POST',\n            headers:{'Content-Type': 'application/json',},\n            body: JSON.stringify({\n                \"username\": props.username,\n                \"password\": props.password,\n                \"creator\": true\n            })\n        })\n            .then(response=>response.json())\n            .then(data=>{\n                console.log(data);\n                if(data.status===400){\n                    console.log('info', data.errors)\n                    if(data.info && data.info.message) alert(data.info.message);\n                    if(data.errors){\n                        data.errors.forEach(error=>alert(error.msg))\n                    }\n                    props.setPassword('');\n                }\n                if(data.status===200){\n                    let token = data.token;\n                    let user = data.user;\n                    console.log('user', data.user)\n                    localStorage.setItem('currentUser', JSON.stringify(user));\n                    localStorage.setItem('authToken', token);\n                    props.setUsername('');\n                    props.setPassword('');\n                    history.push('/');\n                }\n            })\n            .catch(err=>console.error(err));\n    }\n\n    return(\n        <div className='userFormContainer'>\n            <div className='userForm'>\n            <h3>Sign up</h3>\n                <form>\n                    <label> Username\n                        <input type='text' name='username' value={props.username} onChange={props.onChange}></input>\n                    </label>\n                    <label> Password\n                        <input type='password' name='password' value={props.password} onChange={props.onChange}></input>\n                    </label>\n                    <p>Already have an account? <Link to='/login'> Log In</Link></p>\n                    <button className='signupSubmit' type='submit' onClick={onSubmit}>Sign up</button>\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default Signup","import {useState } from 'react';\nimport {Switch, Route, HashRouter} from 'react-router-dom';\nimport jwt from 'jsonwebtoken';\nimport './App.scss';\n\nimport BlogDetail from './BlogDetail';\nimport LogIn from './LogIn';\nimport Homepage from './Homepage';\nimport Header from './Header';\nimport Signup from './Signup'\n\nfunction App() {\n  const [posts, setPosts] = useState([]);\n  const [postDetail, setPostDetail] = useState('');\n  const [postComments, setPostComments] = useState([]);\n  const [comment, setComment] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  // var postList = <p></p>;\n\n  function handleChange(event){\n    let name = event.target.name;\n    let value = event.target.value;\n    if(name==='username')setUsername(value)\n    if(name==='password')setPassword(value)\n    if(name==='comment')setComment(value)\n  }\n\n  function checkExpiration(){\n    if(localStorage.getItem('authToken')){\n      var isExpired = false;\n      const token = localStorage.getItem('authToken');\n      var decodedToken = jwt.decode(token, {complete:true});\n      var dateNow = new Date();\n      if(decodedToken.payload.exp < dateNow.getTime()/1000) isExpired = true;\n      if(isExpired) localStorage.clear();\n      // console.log(decodedToken.payload.exp);\n      // console.log(dateNow.getTime()/1000);\n      // console.log(isExpired);\n    }\n  }\n\n  return (\n    <HashRouter>\n      <Header\n        checkExpiration = {checkExpiration}\n      />\n      <Switch>\n        <Route exact path='/'>\n          <Homepage\n            setPosts = {setPosts}\n            posts = {posts}\n            checkExpiration = {checkExpiration}\n          />\n        </Route>\n        <Route path='/posts/:id'>\n          <BlogDetail\n            data={postDetail}\n            comments={postComments}\n            setPostDetail = {setPostDetail}\n            setPostComments = {setPostComments}\n            comment = {comment}\n            setComment = {setComment}\n            onChange={handleChange}\n          checkExpiration = {checkExpiration}\n          />\n        </Route>\n        <Route path='/login'>\n          <LogIn\n            username={username}\n            password={password}\n            setUsername={setUsername}\n            setPassword={setPassword}\n            onChange={handleChange}\n          />\n        </Route>\n        <Route path='/signup'>\n          <Signup\n            username={username}\n            password={password}\n            setUsername={setUsername}\n            setPassword={setPassword}\n            onChange={handleChange}\n          />\n        </Route>\n      </Switch>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}