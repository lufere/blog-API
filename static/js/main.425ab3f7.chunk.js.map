{"version":3,"sources":["BlogDetail.js","LogIn.js","BlogPreview.js","Homepage.js","Header.js","Signup.js","App.js","index.js"],"names":["BlogDetail","props","id","useParams","useEffect","checkExpiration","Promise","all","fetch","process","then","values","test","map","x","json","data","setTimeout","setPostDetail","post","setPostComments","comments","console","log","commentList","comment","className","author","username","content","timestamp_formatted","_id","title","localStorage","getItem","name","value","onChange","onClick","event","preventDefault","method","headers","body","JSON","stringify","response","setComment","catch","err","error","type","to","LogIn","history","useHistory","setUsername","setPassword","parse","password","status","info","message","alert","token","user","setItem","push","BlogPreview","postId","Homepage","posts","setPosts","post_list","postList","length","Header","clear","window","location","reload","href","Signup","e","errors","forEach","msg","App","useState","postDetail","postComments","handleChange","target","isExpired","decodedToken","jwt","decode","complete","dateNow","Date","payload","exp","getTime","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+gBA4GeA,G,cAxGI,SAAAC,GAAU,IAClBC,EAAMC,cAAND,GAwBP,GAtBAE,qBAAU,WAcF,OAbJH,EAAMI,kBACNC,QAAQC,IAAI,CAACC,MAAM,UAAGC,qCAAH,WAAwCP,GAAIM,MAAM,GAAD,OAAIC,qCAAJ,kBAAuCP,EAAvC,gBAC/DQ,MAAK,SAAAC,GACF,IAAIC,EAAOD,EAAOE,KAAI,SAAAC,GAAC,OAAEA,EAAEC,UAC3BT,QAAQC,IAAIK,GACPF,MAAK,SAAAM,GACFC,YAAW,WACPhB,EAAMiB,cAAcF,EAAK,GAAGG,MAC5BlB,EAAMmB,gBAAgBJ,EAAK,GAAGK,YAC/B,YAIR,WAEHpB,EAAMiB,cAAc,IACpBjB,EAAMmB,gBAAgB,SAGhC,IAEiB,MAAhBnB,EAAMoB,SAAe,CACpBC,QAAQC,IAAI,OAAOtB,EAAMoB,SAAS,IAClC,IAAIG,EAAcvB,EAAMoB,SAASR,KAAI,SAAAY,GAAO,OAAE,sBAAuBC,UAAU,UAAjC,UAC1C,oCAAOD,EAAQE,OAAOF,EAAQE,OAAOC,SAAS,eAC9C,4BAAIH,EAAQI,UACZ,4BAAIJ,EAAQK,wBAHwCL,EAAQM,QAgCpE,OAAI9B,EAAMe,KAYF,gCACI,6BAAKf,EAAMe,KAAKgB,QAChB,4BAAI/B,EAAMe,KAAKW,OAAO1B,EAAMe,KAAKW,OAAOC,SAAS,OACjD,4BAAI3B,EAAMe,KAAKa,UACf,+CAAkB5B,EAAMe,KAAKc,uBAC7B,0CAECN,EACAS,aAAaC,QAAQ,eAClB,+BACI,qDACI,0BACIC,KAAK,UACLC,MAAOnC,EAAMwB,QACbY,SAAUpC,EAAMoC,WAEpB,wBAAQC,QApDhC,SAAkBC,GACdA,EAAMC,iBACNhC,MAAM,GAAD,OAAIC,qCAAJ,kBAAuCP,EAAvC,cAAsD,CACvDuC,OAAQ,OACRC,QAAS,CACL,eAAgB,mBAChB,cAAiB,UAAYT,aAAaC,QAAQ,cAEtDS,KAAMC,KAAKC,UAAU,CACjB,QAAU5C,EAAMwB,YAGnBf,MAAK,SAAAoC,GAAQ,OAAEA,EAAS/B,UACxBL,MAAK,SAAAM,GACFR,MAAM,GAAD,OAAIC,qCAAJ,kBAAuCP,EAAvC,cACAQ,MAAK,SAAAoC,GAAQ,OAAEA,EAAS/B,UACxBL,MAAK,SAAAM,GACFf,EAAMmB,gBAAgBJ,EAAKK,UAC3BpB,EAAM8C,WAAW,OAEpBC,OAAM,SAAAC,GAAG,OAAE3B,QAAQ4B,MAAMD,SAEjCD,OAAM,SAAAC,GAAG,OAAE3B,QAAQ4B,MAAMD,OA8BiBE,KAAK,SAAhC,yBAGP,oBAAGzB,UAAU,eAAb,qDAEG,cAAC,IAAD,CAAM0B,GAAG,SAAT,sBAFH,KAIG,cAAC,IAAD,CAAMA,GAAG,UAAT,6BAjCZ,sBAAK1B,UAAU,UAAf,UACI,qBAAKA,UAAU,UACf,qBAAKA,UAAU,UACf,qBAAKA,UAAU,UACf,qBAAKA,UAAU,UACf,qBAAKA,UAAU,eCWhB2B,EA7ED,SAAApD,GACV,IAAMqD,EAAUC,cAuChB,OArCAnD,qBAAU,WACNH,EAAMuD,YAAY,IAClBvD,EAAMwD,YAAY,MACpB,IAkCCb,KAAKc,MAAMzB,aAAaC,QAAQ,gBAE3B,gCACI,cAAC,IAAD,CAAMkB,GAAG,IAAT,kBACA,0DAA6BR,KAAKc,MAAMzB,aAAaC,QAAQ,gBAAgBN,eAKjF,gCACA,wCACI,iCACI,8CACI,uBACIO,KAAK,WACLjC,GAAG,WACHiD,KAAK,OACLf,MAAOnC,EAAM2B,SACbS,SAAUpC,EAAMoC,cAGxB,8CACI,uBACIF,KAAK,WACLjC,GAAG,WACHiD,KAAK,WACLf,MAAOnC,EAAM0D,SACbtB,SAAUpC,EAAMoC,cAGxB,wBAAQC,QA9DxB,SAAkBC,GACdA,EAAMC,iBACNhC,MAAM,GAAD,OAAIC,qCAAJ,UAAsC,CACvCgC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CACjB,SAAY5C,EAAM2B,SAClB,SAAY3B,EAAM0D,aAGrBjD,MAAK,SAAAoC,GAAQ,OAAEA,EAAS/B,UACxBL,MAAK,SAAAM,GAOF,GANAM,QAAQC,IAAIP,EAAK4C,QACA,MAAd5C,EAAK4C,SACJtC,QAAQC,IAAI,OAAQP,EAAK6C,MACtB7C,EAAK6C,MAAQ7C,EAAK6C,KAAKC,SAASC,MAAM/C,EAAK6C,KAAKC,SACnD7D,EAAMwD,YAAY,KAEL,MAAdzC,EAAK4C,OAAa,CACjB,IAAII,EAAQhD,EAAKgD,MACbC,EAAOjD,EAAKiD,KAChB3C,QAAQC,IAAI,OAAQP,EAAKiD,MACzBhC,aAAaiC,QAAQ,cAAetB,KAAKC,UAAUoB,IACnDhC,aAAaiC,QAAQ,YAAaF,GAClC/D,EAAMuD,YAAY,IAClBvD,EAAMwD,YAAY,IAClBH,EAAQa,KAAK,SAGpBnB,OAAM,SAAAC,GAAG,OAAE3B,QAAQ4B,MAAMD,OAiCSE,KAAK,SAAhC,2BCzDLiB,G,OAbK,SAAAnE,GAEhB,OACI,cAAC,IAAD,CAAMmD,GAAI,UAAYnD,EAAMoE,OAA5B,SACI,sBAAK3C,UAAU,cAAf,UACI,6BAAKzB,EAAM+B,QACX,4BAAI/B,EAAM0B,SACV,4BAAI1B,EAAM4B,iBC6CXyC,EApDE,SAAArE,GAEbG,qBAAU,WACRkB,QAAQC,IAAI,MAAMd,sCAClBR,EAAMI,kBACJG,MAAM,GAAD,OAAIC,qCAAJ,WACFC,MAAK,SAAA6D,GAAK,OAAGA,EAAMxD,UACnBL,MAAK,SAAA6D,GAEFtD,YAAW,WACThB,EAAMuE,SAASD,EAAME,aACpB,SAENzB,OAAM,SAAAC,GAAG,OAAE3B,QAAQ4B,MAAR,iBAAwBD,SAKxC,IAEE,IAAIyB,EAAWzE,EAAMsE,MAAM1D,KAAI,SAAAM,GAC7B,OAAO,cAAC,EAAD,CAELa,MAASb,EAAKa,MACdL,OAAUR,EAAKQ,OAAOR,EAAKQ,OAAOC,SAAS,KAC3CC,QAAWV,EAAKU,QAChBwC,OAAUlD,EAAKY,KAJRZ,EAAKa,MAAM,MAAMb,EAAKQ,WAOrC,OAAwB,IAArB1B,EAAMsE,MAAMI,OAEX,sBAAKjD,UAAU,UAAf,UACE,qBAAKA,UAAU,UACf,qBAAKA,UAAU,UACf,qBAAKA,UAAU,UACf,qBAAKA,UAAU,UACf,qBAAKA,UAAU,aAKjB,qBAAKA,UAAU,MAAf,SAGE,qBAAKA,UAAU,aAAf,SACGgD,OCTEE,EArCA,SAAA3E,GAOX,OALAG,qBAAU,eAKP6B,aAAaC,QAAQ,eAEpB,mCACI,cAAC,IAAD,CAAMkB,GAAG,IAAT,sBACA,gCACI,oBAAGd,QAAS,kBAAIL,aAAa4C,SAA7B,qBAA+CjC,KAAKc,MAAMzB,aAAaC,QAAQ,gBAAgBN,YAC/F,mBACIU,QAAS,WACLL,aAAa4C,QACbC,OAAOC,SAASC,UAEpBtD,UAAU,SALd,0BAYJ,mCACI,cAAC,IAAD,CAAM0B,GAAG,IAAT,sBACA,gCACI,mBAAG6B,KAAK,kCAAR,0BACA,cAAC,IAAD,CAAM7B,GAAG,SAAT,mBACA,cAAC,IAAD,CAAMA,GAAG,UAAT,4BC+BL8B,EA5DA,SAAAjF,GACX,IAAMqD,EAAUC,cA2ChB,OAzCAnD,qBAAU,WACNH,EAAMuD,YAAY,IAClBvD,EAAMwD,YAAY,MACpB,IAuCE,sBAAK/B,UAAU,SAAf,UACA,yCACI,iCACI,8CACI,uBAAOyB,KAAK,OAAOhB,KAAK,WAAWC,MAAOnC,EAAM2B,SAAUS,SAAUpC,EAAMoC,cAE9E,8CACI,uBAAOc,KAAK,WAAWhB,KAAK,WAAWC,MAAOnC,EAAM0D,SAAUtB,SAAUpC,EAAMoC,cAElF,wBAAQc,KAAK,SAASb,QA9ClC,SAAkB6C,GACdA,EAAE3C,iBACFhC,MAAM,GAAD,OAAIC,qCAAJ,YAAwC,CACzCgC,OAAO,OACPC,QAAQ,CAAC,eAAgB,oBACzBC,KAAMC,KAAKC,UAAU,CACjB,SAAY5C,EAAM2B,SAClB,SAAY3B,EAAM0D,SAClB,SAAW,MAGdjD,MAAK,SAAAoC,GAAQ,OAAEA,EAAS/B,UACxBL,MAAK,SAAAM,GAUF,GATAM,QAAQC,IAAIP,GACK,MAAdA,EAAK4C,SACJtC,QAAQC,IAAI,OAAQP,EAAKoE,QACtBpE,EAAK6C,MAAQ7C,EAAK6C,KAAKC,SAASC,MAAM/C,EAAK6C,KAAKC,SAChD9C,EAAKoE,QACJpE,EAAKoE,OAAOC,SAAQ,SAAAnC,GAAK,OAAEa,MAAMb,EAAMoC,QAE3CrF,EAAMwD,YAAY,KAEL,MAAdzC,EAAK4C,OAAa,CACjB,IAAII,EAAQhD,EAAKgD,MACbC,EAAOjD,EAAKiD,KAChB3C,QAAQC,IAAI,OAAQP,EAAKiD,MACzBhC,aAAaiC,QAAQ,cAAetB,KAAKC,UAAUoB,IACnDhC,aAAaiC,QAAQ,YAAaF,GAClC/D,EAAMuD,YAAY,IAClBvD,EAAMwD,YAAY,IAClBH,EAAQa,KAAK,SAGpBnB,OAAM,SAAAC,GAAG,OAAE3B,QAAQ4B,MAAMD,OAatB,4BCgCDsC,MA/Ef,WAAgB,IAAD,EACaC,mBAAS,IADtB,mBACNjB,EADM,KACCC,EADD,OAEuBgB,mBAAS,IAFhC,mBAENC,EAFM,KAEMvE,EAFN,OAG2BsE,mBAAS,IAHpC,mBAGNE,EAHM,KAGQtE,EAHR,OAIiBoE,mBAAS,IAJ1B,mBAIN/D,EAJM,KAIGsB,EAJH,OAKmByC,mBAAS,IAL5B,mBAKN5D,EALM,KAKI4B,EALJ,OAMmBgC,mBAAS,IAN5B,mBAMN7B,EANM,KAMIF,EANJ,KASb,SAASkC,EAAapD,GACpB,IAAIJ,EAAOI,EAAMqD,OAAOzD,KACpBC,EAAQG,EAAMqD,OAAOxD,MACf,aAAPD,GAAkBqB,EAAYpB,GACvB,aAAPD,GAAkBsB,EAAYrB,GACvB,YAAPD,GAAiBY,EAAWX,GAGjC,SAAS/B,IACP,GAAG4B,aAAaC,QAAQ,aAAa,CACnC,IAAI2D,GAAY,EACV7B,EAAQ/B,aAAaC,QAAQ,aAC/B4D,EAAeC,IAAIC,OAAOhC,EAAO,CAACiC,UAAS,IAC3CC,EAAU,IAAIC,KACfL,EAAaM,QAAQC,IAAMH,EAAQI,UAAU,MAAMT,GAAY,GAC/DA,GAAW5D,aAAa4C,SAO/B,OACE,eAAC,IAAD,WACE,cAAC,EAAD,CACExE,gBAAmBA,IAErB,eAAC,IAAD,WACE,cAAC,IAAD,CAAOkG,OAAK,EAACC,KAAK,IAAlB,SACE,cAAC,EAAD,CACEhC,SAAYA,EACZD,MAASA,EACTlE,gBAAmBA,MAGvB,cAAC,IAAD,CAAOmG,KAAK,aAAZ,SACE,cAAC,EAAD,CACExF,KAAMyE,EACNpE,SAAUqE,EACVxE,cAAiBA,EACjBE,gBAAmBA,EACnBK,QAAWA,EACXsB,WAAcA,EACdV,SAAUsD,EACZtF,gBAAmBA,MAGrB,cAAC,IAAD,CAAOmG,KAAK,SAAZ,SACE,cAAC,EAAD,CACE5E,SAAUA,EACV+B,SAAUA,EACVH,YAAaA,EACbC,YAAaA,EACbpB,SAAUsD,MAGd,cAAC,IAAD,CAAOa,KAAK,UAAZ,SACE,cAAC,EAAD,CACE5E,SAAUA,EACV+B,SAAUA,EACVH,YAAaA,EACbC,YAAaA,EACbpB,SAAUsD,aC7EtBc,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.425ab3f7.chunk.js","sourcesContent":["import React, { useEffect } from 'react';\nimport { useParams, Link } from \"react-router-dom\"\nimport './spinner.css'\n\nconst BlogDetail = props => {\n    const {id} = useParams();\n\n    useEffect(()=>{\n        props.checkExpiration();\n        Promise.all([fetch(`${process.env.REACT_APP_API}/posts/` + id),fetch(`${process.env.REACT_APP_API}/posts/${id}/comments`)])\n            .then(values=>{\n                let test = values.map(x=>x.json())\n                Promise.all(test)\n                    .then(data=>{\n                        setTimeout(() => {\n                            props.setPostDetail(data[0].post);\n                            props.setPostComments(data[1].comments);\n                        }, 1100);\n\n                    })\n            })\n            return () =>{\n                // console.log('unmounted');\n                props.setPostDetail('');\n                props.setPostComments(null);\n            }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n\n    if(props.comments!=null){\n        console.log('this',props.comments[0])\n        var commentList = props.comments.map(comment=><div key={comment._id} className='comment'>\n            <p>By {comment.author?comment.author.username:'Anonymous'}</p>\n            <p>{comment.content}</p>\n            <p>{comment.timestamp_formatted}</p>\n        </div>\n        )\n    }\n\n    function onSubmit(event){\n        event.preventDefault();\n        fetch(`${process.env.REACT_APP_API}/posts/${id}/comments/`,{\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': \"Bearer \" + localStorage.getItem('authToken')\n            },\n            body: JSON.stringify({\n                \"content\":props.comment\n            })\n        })\n            .then(response=>response.json())\n            .then(data=>{\n                fetch(`${process.env.REACT_APP_API}/posts/${id}/comments`)\n                    .then(response=>response.json())\n                    .then(data=>{\n                        props.setPostComments(data.comments);\n                        props.setComment('');\n                    })\n                    .catch(err=>console.error(err));\n            })\n            .catch(err=>console.error(err));\n    }\n    if(!props.data){\n        return(\n            <div className=\"spinner\">\n                <div className=\"rect1\"></div>\n                <div className=\"rect2\"></div>\n                <div className=\"rect3\"></div>\n                <div className=\"rect4\"></div>\n                <div className=\"rect5\"></div>\n            </div>\n        )\n    }else{\n        return(\n            <div>\n                <h1>{props.data.title}</h1>\n                <p>{props.data.author?props.data.author.username:null}</p>\n                <p>{props.data.content}</p>\n                <p>Published on: {props.data.timestamp_formatted}</p>\n                <h2>Comments</h2>\n                {/* <div className='spinner'></div> */}\n                {commentList}\n                {localStorage.getItem('currentUser')?\n                    <form>\n                        <label> Make a comment:\n                            <textarea\n                                name='comment'\n                                value={props.comment}\n                                onChange={props.onChange}\n                            />\n                            <button onClick={onSubmit} type='submit'>Submit</button>\n                        </label>\n                    </form>\n                    :<p className='userRequired'>\n                        You need to be a user to leave comments. \n                        <Link to='/login'> Log in </Link>\n                        or \n                        <Link to='/signup'> Sign up </Link>\n                    </p>\n                }\n\n            </div>\n        )\n    }\n\n}\n\nexport default BlogDetail","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nconst LogIn = props => {\n    const history = useHistory();\n\n    useEffect(()=>{\n        props.setUsername('');\n        props.setPassword('');\n    },[])\n\n    function onSubmit(event){\n        event.preventDefault();\n        fetch(`${process.env.REACT_APP_API}/login`,{\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                \"username\": props.username,\n                \"password\": props.password\n            })\n        })\n            .then(response=>response.json())\n            .then(data=>{\n                console.log(data.status);\n                if(data.status===400){\n                    console.log('info', data.info)\n                    if(data.info && data.info.message) alert(data.info.message);\n                    props.setPassword('');\n                }\n                if(data.status===200){\n                    let token = data.token;\n                    let user = data.user;\n                    console.log('user', data.user)\n                    localStorage.setItem('currentUser', JSON.stringify(user));\n                    localStorage.setItem('authToken', token);\n                    props.setUsername('');\n                    props.setPassword('');\n                    history.push('/');\n                }\n            })\n            .catch(err=>console.error(err));\n    }\n\n    if(JSON.parse(localStorage.getItem('currentUser'))){\n        return(\n            <div>\n                <Link to='/'>Back</Link>\n                <p>You're already logged in {JSON.parse(localStorage.getItem('currentUser')).username}</p>\n            </div>\n        )\n    }else{\n        return(\n            <div>\n            <h3>Log in</h3>\n                <form>\n                    <label>Username:\n                        <input\n                            name='username' \n                            id='username' \n                            type='text' \n                            value={props.username} \n                            onChange={props.onChange}\n                        />\n                    </label>\n                    <label >Password:\n                        <input\n                            name='password' \n                            id='password' \n                            type='password' \n                            value={props.password} \n                            onChange={props.onChange}\n                        />\n                    </label>\n                    <button onClick={onSubmit} type='submit'>Log In</button>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default LogIn","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './BlogPreview.css';\n\nconst BlogPreview = props => {\n    // console.log('preview: ',props.posts[0])\n    return(\n        <Link to={'/posts/' + props.postId}>\n            <div className='blogPreview'>\n                <h1>{props.title}</h1>\n                <p>{props.author}</p>\n                <p>{props.content}</p>\n            </div>\n        </Link>\n    )\n}\n\nexport default BlogPreview","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect } from \"react\";\nimport BlogPreview from \"./BlogPreview\"\n\nconst Homepage = props =>{\n\n    useEffect(()=>{\n      console.log('API',process.env.REACT_APP_API)\n      props.checkExpiration();\n        fetch(`${process.env.REACT_APP_API}/posts`)\n          .then(posts =>posts.json())\n          .then(posts =>{\n            // console.log(posts)\n              setTimeout(() => {\n                props.setPosts(posts.post_list);\n              }, 1100);\n          })\n          .catch(err=>console.error(`Error: ${err}`));\n          // console.log(localStorage.getItem('authToken'));\n        //   console.log(localStorage.getItem('currentUser'));\n          // localStorage.clear();\n          // console.log('Check expiration');\n    },[])\n\n        var postList = props.posts.map(post=>{\n          return <BlogPreview\n            key = {post.title+' - '+post.author}\n            title = {post.title}\n            author = {post.author?post.author.username:null}\n            content = {post.content}\n            postId = {post._id}\n          />\n        })\n    if(props.posts.length===0){\n      return(\n        <div className=\"spinner\">\n          <div className=\"rect1\"></div>\n          <div className=\"rect2\"></div>\n          <div className=\"rect3\"></div>\n          <div className=\"rect4\"></div>\n          <div className=\"rect5\"></div>\n        </div>\n      )\n    }else{\n      return(\n        <div className=\"App\">\n          {/* <h3>Welcome {localStorage.getItem('currentUser')?JSON.parse(localStorage.getItem('currentUser')).username:null}</h3> */}\n          {/* <Link to='/login'>LOGIN</Link> */}\n          <div className=\"App-header\">\n            {postList}\n          </div>\n        </div>\n      )\n    }\n}\n\nexport default Homepage","import { useEffect } from \"react\"\nimport { Link } from \"react-router-dom\"\n\nconst Header = props =>{\n\n    useEffect(()=>{\n        // console.log('updated');\n        // props.checkExpiration();\n    })\n\n    if(localStorage.getItem('currentUser')){\n        return(\n        <header>\n            <Link to='/'>Blog API</Link>\n            <div>\n                <p onClick={()=>localStorage.clear()}>Welcome {JSON.parse(localStorage.getItem('currentUser')).username}</p>\n                <p \n                    onClick={()=>{\n                        localStorage.clear();\n                        window.location.reload();\n                        }} \n                    className='logout'\n                >Logout</p>\n            </div>\n        </header>\n        )\n    }else{\n        return(\n            <header>\n                <Link to='/'>Blog API</Link>\n                <div>\n                    <a href='https://lufere.dev/blog-manager'>Blog Manager</a>\n                    <Link to='/login'>Login</Link>\n                    <Link to='/signup'>Sign up</Link>\n                </div>\n            </header>\n        )\n    }\n}\n\nexport default Header","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect } from \"react\"\nimport { useHistory } from \"react-router-dom\";\n\nconst Signup = props =>{\n    const history = useHistory();\n\n    useEffect(()=>{\n        props.setUsername('');\n        props.setPassword('');\n    },[])\n\n    function onSubmit(e){\n        e.preventDefault();\n        fetch(`${process.env.REACT_APP_API}/sign-up`,{\n            method:'POST',\n            headers:{'Content-Type': 'application/json',},\n            body: JSON.stringify({\n                \"username\": props.username,\n                \"password\": props.password,\n                \"creator\": true\n            })\n        })\n            .then(response=>response.json())\n            .then(data=>{\n                console.log(data);\n                if(data.status===400){\n                    console.log('info', data.errors)\n                    if(data.info && data.info.message) alert(data.info.message);\n                    if(data.errors){\n                        data.errors.forEach(error=>alert(error.msg))\n                    }\n                    props.setPassword('');\n                }\n                if(data.status===200){\n                    let token = data.token;\n                    let user = data.user;\n                    console.log('user', data.user)\n                    localStorage.setItem('currentUser', JSON.stringify(user));\n                    localStorage.setItem('authToken', token);\n                    props.setUsername('');\n                    props.setPassword('');\n                    history.push('/');\n                }\n            })\n            .catch(err=>console.error(err));\n    }\n\n    return(\n        <div className='signup'>\n        <h3>Sign up</h3>\n            <form>\n                <label> Username\n                    <input type='text' name='username' value={props.username} onChange={props.onChange}></input>\n                </label>\n                <label> Password\n                    <input type='password' name='password' value={props.password} onChange={props.onChange}></input>\n                </label>\n                <button type='submit' onClick={onSubmit}>Sign up</button>\n            </form>\n        </div>\n    )\n}\n\nexport default Signup","import {useState } from 'react';\nimport {Switch, Route, HashRouter} from 'react-router-dom';\nimport jwt from 'jsonwebtoken';\nimport './App.css';\n\nimport BlogDetail from './BlogDetail';\nimport LogIn from './LogIn';\nimport Homepage from './Homepage';\nimport Header from './Header';\nimport Signup from './Signup'\n\nfunction App() {\n  const [posts, setPosts] = useState([]);\n  const [postDetail, setPostDetail] = useState('');\n  const [postComments, setPostComments] = useState([]);\n  const [comment, setComment] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  // var postList = <p></p>;\n\n  function handleChange(event){\n    let name = event.target.name;\n    let value = event.target.value;\n    if(name==='username')setUsername(value)\n    if(name==='password')setPassword(value)\n    if(name==='comment')setComment(value)\n  }\n\n  function checkExpiration(){\n    if(localStorage.getItem('authToken')){\n      var isExpired = false;\n      const token = localStorage.getItem('authToken');\n      var decodedToken = jwt.decode(token, {complete:true});\n      var dateNow = new Date();\n      if(decodedToken.payload.exp < dateNow.getTime()/1000) isExpired = true;\n      if(isExpired) localStorage.clear();\n      // console.log(decodedToken.payload.exp);\n      // console.log(dateNow.getTime()/1000);\n      // console.log(isExpired);\n    }\n  }\n\n  return (\n    <HashRouter>\n      <Header\n        checkExpiration = {checkExpiration}\n      />\n      <Switch>\n        <Route exact path='/'>\n          <Homepage\n            setPosts = {setPosts}\n            posts = {posts}\n            checkExpiration = {checkExpiration}\n          />\n        </Route>\n        <Route path='/posts/:id'>\n          <BlogDetail\n            data={postDetail}\n            comments={postComments}\n            setPostDetail = {setPostDetail}\n            setPostComments = {setPostComments}\n            comment = {comment}\n            setComment = {setComment}\n            onChange={handleChange}\n          checkExpiration = {checkExpiration}\n          />\n        </Route>\n        <Route path='/login'>\n          <LogIn\n            username={username}\n            password={password}\n            setUsername={setUsername}\n            setPassword={setPassword}\n            onChange={handleChange}\n          />\n        </Route>\n        <Route path='/signup'>\n          <Signup\n            username={username}\n            password={password}\n            setUsername={setUsername}\n            setPassword={setPassword}\n            onChange={handleChange}\n          />\n        </Route>\n      </Switch>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}