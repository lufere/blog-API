{"version":3,"sources":["BlogDetail.js","LogIn.js","BlogPreview.js","Homepage.js","Header.js","Signup.js","App.js","index.js"],"names":["BlogDetail","props","id","useParams","history","useHistory","useEffect","checkExpiration","Promise","all","fetch","process","then","values","test","map","x","json","data","setTimeout","setPostDetail","post","setPostComments","comments","console","log","commentList","comment","className","author","username","dangerouslySetInnerHTML","__html","htmlDecode","content","timestamp_formatted","_id","input","DOMParser","parseFromString","documentElement","textContent","onClick","push","title","localStorage","getItem","name","value","onChange","event","preventDefault","method","headers","body","JSON","stringify","response","setComment","catch","err","error","type","to","LogIn","setUsername","setPassword","setErrors","parse","errors","password","status","info","message","token","user","setItem","BlogPreview","postId","timestamp","Homepage","posts","setPosts","post_list","postList","i","published","index","length","Header","href","clear","window","location","reload","Signup","e","msg","App","useState","postDetail","postComments","handleChange","target","isExpired","decodedToken","jwt","decode","complete","dateNow","Date","payload","exp","getTime","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.47563194.chunk.js","sourcesContent":["import React, { useEffect } from 'react';\nimport { useParams, Link, useHistory } from \"react-router-dom\"\nimport './spinner.css'\n\nconst BlogDetail = props => {\n    const {id} = useParams();\n    const history = useHistory();\n\n    useEffect(()=>{\n        // console.log('OVERFLOWN?',isOverflown());\n        props.checkExpiration();\n        Promise.all([fetch(`${process.env.REACT_APP_API}/posts/` + id),fetch(`${process.env.REACT_APP_API}/posts/${id}/comments`)])\n            .then(values=>{\n                let test = values.map(x=>x.json())\n                Promise.all(test)\n                    .then(data=>{\n                        setTimeout(() => {\n                            props.setPostDetail(data[0].post);\n                            props.setPostComments(data[1].comments);\n                        }, 1100);\n\n                    })\n            })\n            return () =>{\n                // console.log('unmounted');\n                props.setPostDetail('');\n                props.setPostComments(null);\n            }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n\n    if(props.comments!=null){\n        console.log('this',props.comments[0])\n        var commentList = props.comments.map(comment=><div key={comment._id} className='comment'>\n            <p>{comment.author?comment.author.username:'Anonymous'} said: </p>\n            <p dangerouslySetInnerHTML={{__html: htmlDecode(comment.content) }}></p>\n            <p>On {comment.timestamp_formatted}</p>\n        </div>\n        )\n    }\n\n    function onSubmit(event){\n        event.preventDefault();\n        fetch(`${process.env.REACT_APP_API}/posts/${id}/comments/`,{\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': \"Bearer \" + localStorage.getItem('authToken')\n            },\n            body: JSON.stringify({\n                \"content\":props.comment\n            })\n        })\n            .then(response=>response.json())\n            .then(data=>{\n                fetch(`${process.env.REACT_APP_API}/posts/${id}/comments`)\n                    .then(response=>response.json())\n                    .then(data=>{\n                        props.setPostComments(data.comments);\n                        props.setComment('');\n                    })\n                    .catch(err=>console.error(err));\n            })\n            .catch(err=>console.error(err));\n    }\n\n    function htmlDecode(input){\n        var doc = new DOMParser().parseFromString(input, \"text/html\");\n        // console.log('doc', doc.documentElement.textContent);\n        return doc.documentElement.textContent;\n    }\n\n    if(!props.data){\n        return(\n            <div className=\"spinnerContainer\">\n                <div className=\"spinner\">\n                    <div className=\"rect1\"></div>\n                    <div className=\"rect2\"></div>\n                    <div className=\"rect3\"></div>\n                    <div className=\"rect4\"></div>\n                    <div className=\"rect5\"></div>\n                </div>\n            </div>\n        )\n    }else{\n        return(\n            <div className='blogDetailContainer'>\n                <div className='blogDetail'>\n                    <button\n                        className='return'\n                        onClick={()=>history.push('/')}\n                    />\n                    <h1>{props.data.title}</h1>\n                    <p className='detailAuthor'>By {props.data.author?props.data.author.username:null}</p>\n                    <p className='detailContent' dangerouslySetInnerHTML={{__html: htmlDecode(props.data.content) }}></p>\n                    <p className='detailPublished'>Published on: {props.data.timestamp_formatted}</p>\n                    {/* <div className='spinner'></div> */}\n                    <div className='commentContainer'>\n                        <h2>Comments</h2>\n                        {commentList}\n                    </div>\n                    {localStorage.getItem('currentUser')?\n                        <form className='postComment'>\n                            <label> Make a comment:\n                                <textarea\n                                    name='comment'\n                                    value={props.comment}\n                                    onChange={props.onChange}\n                                />\n                            </label>\n                            <button onClick={onSubmit} type='submit'>Submit</button>\n                        </form>\n                        :<p className='userRequired'>\n                            You need to be a user to leave comments. \n                            <Link to='/login'> Log in </Link>\n                            or \n                            <Link to='/signup'> Sign up </Link>\n                        </p>\n                    }\n\n                </div>\n            </div>\n        )\n    }\n\n}\n\nexport default BlogDetail","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nconst LogIn = props => {\n    const history = useHistory();\n\n    useEffect(()=>{\n        props.setUsername('');\n        props.setPassword('');\n        props.setErrors();\n    },[])\n\n    function onSubmit(event){\n        event.preventDefault();\n        fetch(`${process.env.REACT_APP_API}/login`,{\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                \"username\": props.username,\n                \"password\": props.password\n            })\n        })\n            .then(response=>response.json())\n            .then(data=>{\n                console.log(data.status);\n                if(data.status===400){\n                    props.setErrors(data.info.message);\n                    props.setPassword('');\n                }\n                if(data.status===200){\n                    let token = data.token;\n                    let user = data.user;\n                    console.log('user', data.user)\n                    localStorage.setItem('currentUser', JSON.stringify(user));\n                    localStorage.setItem('authToken', token);\n                    props.setUsername('');\n                    props.setPassword('');\n                    history.push('/');\n                }\n            })\n            .catch(err=>console.error(err));\n    }\n\n    if(JSON.parse(localStorage.getItem('currentUser'))){\n        return(\n            <div>\n                <Link to='/'>Back</Link>\n                <p>You're already logged in {JSON.parse(localStorage.getItem('currentUser')).username}</p>\n            </div>\n        )\n    }else{\n        return(\n            <div className='userFormContainer'>\n                {props.errors?<div className='errorBanner'>{props.errors}</div>:null}\n                <div className='userForm'>\n                    <h3>Log in</h3>\n                    <form>\n                        <label>Username\n                            <input\n                                name='username' \n                                id='username' \n                                type='text' \n                                value={props.username} \n                                onChange={props.onChange}\n                            />\n                        </label>\n                        <label >Password\n                            <input\n                                name='password' \n                                id='password' \n                                type='password' \n                                value={props.password} \n                                onChange={props.onChange}\n                            />\n                        </label>\n                        <p>Don't have an account? <Link to='/signup'>Sign Up</Link></p>\n                        <button onClick={onSubmit} type='submit'>Log In</button>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default LogIn","import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\n// import './BlogPreview.css';\n\nconst BlogPreview = props => {\n    // const [overFlown, setOverFlown] = useState(false)\n\n    // useEffect(()=>{\n    //     console.log(overFlown)\n    //   },[overFlown])\n    // useEffect(()=>{\n    //     let content;\n    //     let preview =  document.querySelectorAll('.blogPreview')[1];\n    //     if(preview ){\n    //         content = preview.querySelector('.content');\n    //         console.log(content.scrollHeight);\n    //         console.log(content.offsetHeight);\n    //         if(content.scrollHeight > content.offsetHeight) setOverFlown(true)\n    //         setOverFlown(false);\n    //     }\n    // },[])\n    // var footer = overFlown?<div className='readMore'>READ MORE</div>:'asdsd';\n    // console.log('preview: ',props.posts[0])\n    function htmlDecode(input){\n        var doc = new DOMParser().parseFromString(input, \"text/html\");\n        // console.log('doc', doc.documentElement.textContent);\n        return doc.documentElement.textContent;\n    }\n    \n    return(\n        <Link to={'/posts/' + props.postId}>\n            <div className='blogPreview'>\n                <div className='content'>\n                    <h1>{props.title}</h1>\n                    <p className='authorPreview'>Authored by <span>{props.author?props.author:'Anonymous'}</span> on <span>{props.timestamp}</span></p>\n                    <p className='contentPreview' dangerouslySetInnerHTML={{__html: htmlDecode(props.content) }}></p>\n                </div>\n                {/* {footer} */}\n                {/* {overFlown?<div className='readMore'>READ MORE</div>:null} */}\n            </div>\n        </Link>\n    )\n}\n\nexport default BlogPreview","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect, useState } from \"react\";\nimport BlogPreview from \"./BlogPreview\"\n\nconst Homepage = props =>{\n    useEffect(()=>{\n      props.checkExpiration();\n      fetch(`${process.env.REACT_APP_API}/posts`)\n        .then(posts =>posts.json())\n        .then(posts =>{\n          // console.log(posts)\n            setTimeout(() => {\n              props.setPosts(posts.post_list);\n            }, 1100);\n        })\n        .catch(err=>console.error(`Error: ${err}`));\n        // console.log(localStorage.getItem('authToken'));\n      //   console.log(localStorage.getItem('currentUser'));\n        // localStorage.clear();\n        // console.log('Check expiration');\n    },[])\n\n        var postList = props.posts.map((post,i)=>{\n          if(post.published){\n            return <BlogPreview\n              key = {post.title+' - '+post.author}\n              title = {post.title}\n              author = {post.author?post.author.username:null}\n              content = {post.content}\n              postId = {post._id}\n              timestamp = {post.timestamp_formatted}\n              index = {i}\n            />\n          }else{\n            return null\n          }\n        })\n    if(props.posts.length===0){\n      return(\n        <div className='spinnerContainer'>  \n          <div className=\"spinner\">\n            <div className=\"rect1\"></div>\n            <div className=\"rect2\"></div>\n            <div className=\"rect3\"></div>\n            <div className=\"rect4\"></div>\n            <div className=\"rect5\"></div>\n          </div>\n        </div>\n      )\n    }else{\n      return(\n        <div className=\"homepage\">\n          {/* <h3>Welcome {localStorage.getItem('currentUser')?JSON.parse(localStorage.getItem('currentUser')).username:null}</h3> */}\n            {postList}\n        </div>\n      )\n    }\n}\n\nexport default Homepage","import { useEffect } from \"react\"\nimport { Link } from \"react-router-dom\"\n\nconst Header = props =>{\n\n    useEffect(()=>{\n        // console.log('updated');\n        // props.checkExpiration();\n    })\n\n    if(localStorage.getItem('currentUser')){\n        return(\n        <header>\n            <Link className='logo' to='/'>Blog Viewer</Link>\n            <nav>\n                <a href='https://lufere.dev/blog-manager/'>Blog Manager</a>\n                <p>Welcome <span>{JSON.parse(localStorage.getItem('currentUser')).username}</span></p>\n                <button \n                    onClick={()=>{\n                        localStorage.clear();\n                        window.location.reload();\n                        }} \n                    className='logout'\n                >Logout</button>\n            </nav>\n        </header>\n        )\n    }else{\n        return(\n            <header>\n                <Link to='/'>Blog Viewer</Link>\n                <nav>\n                    <a href='https://lufere.dev/blog-manager/'>Blog Manager</a>\n                    <Link to='/login'>Login</Link>\n                    <Link to='/signup'>Sign up</Link>\n                </nav>\n            </header>\n        )\n    }\n}\n\nexport default Header","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect } from \"react\"\nimport { Link, useHistory } from \"react-router-dom\";\n\nconst Signup = props =>{\n    const history = useHistory();\n\n    useEffect(()=>{\n        props.setUsername('');\n        props.setPassword('');\n        props.setErrors();\n    },[])\n\n    function onSubmit(e){\n        e.preventDefault();\n        fetch(`${process.env.REACT_APP_API}/sign-up`,{\n            method:'POST',\n            headers:{'Content-Type': 'application/json',},\n            body: JSON.stringify({\n                \"username\": props.username,\n                \"password\": props.password,\n                \"creator\": true\n            })\n        })\n            .then(response=>response.json())\n            .then(data=>{\n                console.log(data);\n                if(data.status===400){\n                    console.log('info', data.errors)\n                    props.setErrors(data.errors[0].msg);\n                    // if(data.info && data.info.message) alert(data.info.message);\n                    // if(data.errors){\n                    //     data.errors.forEach(error=>alert(error.msg))\n                    // }\n                    props.setPassword('');\n                }\n                if(data.status===200){\n                    let token = data.token;\n                    let user = data.user;\n                    console.log('user', data.user)\n                    localStorage.setItem('currentUser', JSON.stringify(user));\n                    localStorage.setItem('authToken', token);\n                    props.setUsername('');\n                    props.setPassword('');\n                    history.push('/');\n                }\n            })\n            .catch(err=>console.error(err));\n    }\n\n    return(\n        <div className='userFormContainer'>\n            {props.errors?<div className='errorBanner'>{props.errors}</div>:null}\n            <div className='userForm'>\n                <h3>Sign up</h3>\n                <form>\n                    <label> Username\n                        <input type='text' name='username' value={props.username} onChange={props.onChange}></input>\n                    </label>\n                    <label> Password\n                        <input type='password' name='password' value={props.password} onChange={props.onChange}></input>\n                    </label>\n                    <p>Already have an account? <Link to='/login'> Log In</Link></p>\n                    <button className='signupSubmit' type='submit' onClick={onSubmit}>Sign up</button>\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default Signup","import {useState } from 'react';\nimport {Switch, Route, HashRouter} from 'react-router-dom';\nimport jwt from 'jsonwebtoken';\nimport './App.scss';\n\nimport BlogDetail from './BlogDetail';\nimport LogIn from './LogIn';\nimport Homepage from './Homepage';\nimport Header from './Header';\nimport Signup from './Signup'\n\nfunction App() {\n  const [posts, setPosts] = useState([]);\n  const [postDetail, setPostDetail] = useState('');\n  const [postComments, setPostComments] = useState([]);\n  const [comment, setComment] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errors, setErrors] = useState();\n  // var postList = <p></p>;\n\n  function handleChange(event){\n    let name = event.target.name;\n    let value = event.target.value;\n    if(name==='username')setUsername(value)\n    if(name==='password')setPassword(value)\n    if(name==='comment')setComment(value)\n  }\n\n  function checkExpiration(){\n    if(localStorage.getItem('authToken')){\n      var isExpired = false;\n      const token = localStorage.getItem('authToken');\n      var decodedToken = jwt.decode(token, {complete:true});\n      var dateNow = new Date();\n      if(decodedToken.payload.exp < dateNow.getTime()/1000) isExpired = true;\n      if(isExpired) localStorage.clear();\n      // console.log(decodedToken.payload.exp);\n      // console.log(dateNow.getTime()/1000);\n      // console.log(isExpired);\n    }\n  }\n\n  return (\n    <HashRouter>\n      <Header\n        checkExpiration = {checkExpiration}\n      />\n      <Switch>\n        <Route exact path='/'>\n          <Homepage\n            setPosts = {setPosts}\n            posts = {posts}\n            checkExpiration = {checkExpiration}\n          />\n        </Route>\n        <Route path='/posts/:id'>\n          <BlogDetail\n            data={postDetail}\n            comments={postComments}\n            setPostDetail = {setPostDetail}\n            setPostComments = {setPostComments}\n            comment = {comment}\n            setComment = {setComment}\n            onChange={handleChange}\n          checkExpiration = {checkExpiration}\n          />\n        </Route>\n        <Route path='/login'>\n          <LogIn\n            username={username}\n            password={password}\n            setUsername={setUsername}\n            setPassword={setPassword}\n            onChange={handleChange}\n            errors={errors}\n            setErrors={setErrors}\n          />\n        </Route>\n        <Route path='/signup'>\n          <Signup\n            errors={errors}\n            setErrors={setErrors}\n            username={username}\n            password={password}\n            setUsername={setUsername}\n            setPassword={setPassword}\n            onChange={handleChange}\n          />\n        </Route>\n      </Switch>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}